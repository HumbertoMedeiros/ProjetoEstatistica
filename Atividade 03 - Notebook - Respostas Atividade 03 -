# Questﾃ｣o 01 - Qual ﾃｩ a distribuiﾃｧﾃ｣o do nﾃｺmero de ingressantes por regiﾃ｣o do paﾃｭs?
#Agrupe por NO_REGIAO e calcule a soma, mﾃｩdia e desvio padrﾃ｣o da variﾃ｡vel QT_ING. Apresente os resultados em uma tabela ou grﾃ｡fico de barras.

import pandas as pd
import matplotlib.pyplot as plt

# Agrupar os dados
agrupado = dataF.groupby('NO_REGIAO')['QT_ING'].agg(['sum', 'mean', 'std']).reset_index()
agrupado.columns = ['Regiﾃ｣o', 'Soma_QT_ING', 'Mﾃｩdia_QT_ING', 'Desvio_Padrﾃ｣o_QT_ING']

# Tabela criada com os dados agrupados por Regiﾃ｣o
print("\n搭 Tabela com Soma, Mﾃｩdia e Desvio Padrﾃ｣o de QT_ING por Regiﾃ｣o:\n")
print(agrupado)
print()

print('GRﾃ：ICOS DE BARRAS TRAZENDO UMA MELHOR VISUALIZAﾃﾃグ DA SOMA, Mﾃ吋IA E DESVIO PADRﾃグ POR REGIﾃグ')
print()

def grafico_com_valores(titulo, y_label, valores, cor, label_legenda):
    plt.figure(figsize=(9, 5))
    barras = plt.bar(agrupado['Regiﾃ｣o'], valores, color=cor, label=label_legenda)
    plt.title(titulo, fontsize=14)
    plt.xlabel('Regiﾃ｣o', fontsize=12)
    plt.ylabel(y_label, fontsize=12)
    plt.xticks(rotation=45)
    plt.legend(loc='upper right', fontsize=10)
    
    for barra in barras:
        altura = barra.get_height()
        plt.text(
            barra.get_x() + barra.get_width() / 2, 
            altura,                                
            f'{altura:.2f}',                       # valor com 2 casas decimais
            ha='center', va='bottom', fontsize=9, color='black'
        )
    
    plt.tight_layout()
    plt.show()

# Grﾃ｡ficos com valores em cima das barras e legenda
grafico_com_valores('Soma de QT_ING por Regiﾃ｣o', 'Soma', agrupado['Soma_QT_ING'], 'steelblue', 'Soma de QT_ING')
grafico_com_valores('Mﾃｩdia de QT_ING por Regiﾃ｣o', 'Mﾃｩdia', agrupado['Mﾃｩdia_QT_ING'], 'seagreen', 'Mﾃｩdia de QT_ING')
grafico_com_valores('Desvio Padrﾃ｣o de QT_ING por Regiﾃ｣o', 'Desvio Padrﾃ｣o', agrupado['Desvio_Padrﾃ｣o_QT_ING'], 'indianred', 'Desvio Padrﾃ｣o de QT_ING')
